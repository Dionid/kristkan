"use strict";$(window).load(function(){function a(a,b){var c=function(){};c.prototype=b.prototype;var d=new c;for(var e in a.prototype)d[e]=a.prototype[e];a.prototype=d,a.prototype[b.prototype.__class_name]=b.prototype,a.superclass=b.prototype}function b(a,b,c,d){"insertRule"in a?a.insertRule(b+"{"+c+"}",d):"addRule"in a&&a.addRule(b,c,d)}function c(a){this.active_row={},this.element=a,y.subscribe("row_activated",this.set_active_row)}function d(a,b,c,d){this.album_name=a,this.album_number=b,this.album_row_element=c,this.album_row_placeholder_element=d,this.album_row_items=[],this.album_item_image_class="album-item-image",this.album_row_width=0,this.album_row_x_transform_speed=0,this.local_mediator=new Mediator,this.exemplars.push(this),this.images_counter=0,this.local_mediator.subscribe("row_created",this.hover,{},this),this.local_mediator.subscribe("row_created",this.ajax_get_images_src_array,{},this),this.local_mediator.subscribe("album_images_data_recieved",this.create_all_items,{},this),this.local_mediator.subscribe("all_items_created",this.onclick_images_array,{},this),this.local_mediator.subscribe("all_items_created",this.set_width,{},this),this.local_mediator.subscribe("album_row_width_set",this.set_x_transform_speed,{},this)}function e(a,b,c){this.controller_name=a,this.controller_element=b,this.place_holder,function(a){var b,c;!function(){return"object"==typeof a.controller_element&&a.controller_element.selector.match(/[#]+/)?b=a.controller_element.selector.match(/#([a-z]+)/)[1]:void 0}(),function(){if("object"==typeof a.controller_element&&a.controller_element.selector.match(/[\.]+/)){var b=a.controller_element.selector.match(/\.[a-z.]+/)[0].split(".").clean("");c=b.join(" ")}}();var d=$("<div/>",{id:b,"class":c});a.place_holder.append(d),a.controller_element=d}(this),this.set_element_view(c)}function f(a,b,c,d,e,g){f.superclass.constructor.call(this,a,b,c),this.modal_window_element=d,this.click_function(),this.exemplars.push(this),this.on_modal_close=g,this.on_modal_open=e}function g(){s.lightbox_modal_opened||(x.show(),$(".light-box-album-name").remove())}function h(){x.hide()}function i(a){return a%1===0}function j(a,b){"string"==typeof a&&(this.name=a||"Default"),this.all_series=[],this.all_created_items_in_series=[],this.active_item_index=0,this.all_created_images_in_series=[],this.lightbox_modal_opened=!1,"object"==typeof b?(b.series_element&&(this.series_element=b.series_element),b.image_element_in_series&&(this.image_element_in_series=this.series_element.find(b.image_element_in_series)),b.loaded_images&&"object"==typeof b.loaded_images&&(this.loaded_images=b.loaded_images),b.placeholder&&(this.placeholder=b.placeholder),b.on_close_callback&&(this.on_close_callback=b.on_close_callback),this.lightbox_modal_class=b.lightbox_modal_class||"lightbox-modal",this.lightbox_modal_item_class=b.lightbox_modal_item_class||"lightbox-modal-item",this.lightbox_modal_item_img_class=b.lightbox_modal_item_img_class||"lightbox-modal-item-img",this.lightbox_modal_all_items=b.lightbox_modal_all_items||"lightbox-modal-all-items",this.lightbox_modal_tutorial=b.lightbox_modal_tutorial||"lightbox-modal-tutorial",b.loading_images?(this.compile_elements_in_series(),this.close_button()):(this.compile_elements_in_series(),this.init(),this.close_button())):(this.placeholder=$("body").find(".lightbox-placeholder").length>0?$("body").find(".lightbox-placeholder"):$("body"),$("body").find(".lightbox-modal").length>0&&$("body").find(".lightbox-modal-item-img").length>0&&(this.series_element=$("body").find(".lightbox-modal"),this.image_element_in_series=$("body").find(".lightbox-modal-item-img")),this.compile_elements_in_series(),this.init(),this.close_button())}var k=$(window).height(),l=$(window).width(),m=parseInt($(".gallery").css("height")),n=(parseInt($(".gallery").css("width")),(m-k)/k),o=$("#row1").css("height"),p=document.styleSheets[0],q=.9*k*1.7,r=0,s={},t={},u=!1;window.paceOptions={elements:{selectors:[".item img"]}};var v,w,x,y=new Mediator;Object.defineProperty(Array.prototype,"clean",{value:function(a){for(var b=0;b<this.length;b++)this[b]==a&&(this.splice(b,1),b--);return this},enumerable:!1});var z=function(){this.observers=[]};z.prototype.deliver=function(a){for(var b in this.observers)this.observers[b].func.call(this.observers[b].context,a)},Function.prototype.subscribe=function(a,b){var c=b||this,d={context:c,func:this};return a.observers.push(d),this},p.cssRules?b(p,".row.modal-window .modal-window-items","width: "+q+"px",p.cssRules.length):b(p,".row.modal-window .modal-window-items","width: "+q+"px",0),c.prototype={__class_name:"Gallery",constructor:c,set_active_row:function(a){this.active_row=a.active_row||a}};new c($(".gallery"));d.prototype={__class_name:"Album",constructor:d,exemplars:[],create_element:function(a,b,c){var d=this;this.id="",this.class_name="",this.item_element=a,this.placeholder=b,function(){return"object"==typeof a&&a.selector.match(/[#]+/)?(d.id=d.item_element.selector.match(/#([a-z0-9]+)/)[1],d.id):void 0}(),function(){if("object"==typeof a&&a.selector.match(/[\.]+/)){var b=d.item_element.selector.match(/\.[a-z0-9.]+/)[0].split(".").clean("");d.class_name=b.join(" ")}}(),c.call(this)},create_row:function(){return this.create_element(this.album_row_element,this.album_row_placeholder_element,function(){var a=$("<div/>",{id:this.id,"class":this.class_name});this.placeholder.prepend(a),this.album_row_element=a,this.local_mediator.publish("row_created")}),!0},ajax_get_images_src_array:function(){var a=this,b="images/"+this.album_name.toLowerCase()+"_images.json";$.getJSON(b,function(b){a.all_images=b.image_sources.split(",");for(var c=b.image_sources.split(",");c.length>10;){var d=Math.floor(Math.random()*c.length);c.splice(d,1)}a.local_mediator.publish("album_images_data_recieved",c)}).done(function(){}).fail(function(a,b){console.error("parsererror"==b?"not valid json":"other problem")})},create_item:function(a,b){var a=a,c=this;this.create_element(this.album_row_element,this.album_row_placeholder_element,function(){var b,d=$("<div/>",{"class":"overlay"}),e=$("<a/>",{"class":"photo-link"}),f=$("<div/>",{"class":"item"}),g=$("<img />").attr({src:a,"class":this.album_item_image_class}).load(function(){this.complete&&"undefined"!=typeof this.naturalWidth&&0!=this.naturalWidth?(b=f.append(g).append(e).append(d),c.album_row_element.append(b),c.album_row_items.push(b),c.images_counter--,-1===c.images_counter&&c.local_mediator.publish("all_items_created")):alert("broken image!")})})},create_all_items:function(a){var b=this,a=this.images_src||a;this.images_counter=a.length,$.each(a,function(c,d){var e=d;c===a.length-1?b.create_item(e,c):b.create_item(e)}),b.images_counter--},set_width:function(){return this.album_row_width=this.album_row_element[0].scrollWidth+"px",this.local_mediator.publish("album_row_width_set"),!0},set_x_transform_speed:function(){return this.album_row_x_transform_speed=(parseInt(this.album_row_width)-l)/l,y.publish("album created",this),!0},hover:function(){this.album_row_element.hover(function(){$(".overlay",this).addClass("overlay-active")},function(){$(".overlay",this).removeClass("overlay-active")})},onclick_images_array:function(){function a(a){if(u===!1)return!1;var c=a,d=function(){setTimeout(function(){$("#blackscreen").fadeOut()},1e3),setTimeout(function(){$(".lightbox-modal-tutorial").fadeOut()},3e3)};$("#blackscreen").fadeIn(function(){var a=b.album_name.toUpperCase();$("nav").append("<h2 class='light-box-album-name'>"+a+"</h2>"),s.init_with_loaded_images($(c),b.all_images,d),h()})}for(var b=this,c=0;c<b.all_images.length;c++)b.all_images[c]=b.all_images[c].replace("min/","");this.album_row_element.find("."+this.album_item_image_class).unbind("click").on("click",function(){a(this)}),$("#name-"+this.album_name).unbind("click").on("click",function(){a(b.album_row_element.find("."+b.album_item_image_class)[0])})},x_transform:function(a){return this.album_row_element.css("transform","translate3d(-"+a*this.album_row_x_transform_speed+"px,0,0)"),!0},new_x_transform:function(a){return this.album_row_element.css("transform","translate3d(-"+a*this.album_row_x_transform_speed+"px,0,0)"),!0}};var A=new d("Holland",1,$("#row1.row"),$(".gallery")),B=new d("London",2,$("#row2.row"),$(".gallery")),C=new d("Spain",3,$("#row3.row"),$(".gallery")),D=new d("Thailand",4,$("#row4.row"),$(".gallery")),E=new d("LA",4,$("#row5.row"),$(".gallery"));E.create_row(),D.create_row(),C.create_row(),B.create_row(),A.create_row(),e.prototype={__class_name:"Controller",constructor:e,show:function(){this.controller_element.css({opacity:1,visibility:"visible"})},hide:function(){this.controller_element.css({opacity:0,visibility:"none"})},set_element_view:function(a){this.controller_element.append(a)},set_place_holder:function(a){return this.place_holder=a,this.place_holder}},f.prototype={__class_name:"ModalController",constructor:f,exemplars:[],opened_modal:!1,open_modal:function(){this.modal_window_element.fadeIn()},hide_modal:function(){this.modal_window_element.fadeOut()},click_function:function(){var a=this;this.controller_element.unbind("click").on("click",function(){$.isEmptyObject(t)?(t=a,a.modal_window_element.fadeIn(500),a.controller_element.toggleClass("active"),a.on_modal_open()):t===a?(t.modal_window_element.fadeOut(500),t="",a.controller_element.toggleClass("active"),a.on_modal_close()):(a.controller_element.toggleClass("active"),t.controller_element.toggleClass("active"),t.modal_window_element.fadeOut(500),a.modal_window_element.fadeIn(500),t=a)})}},a(f,e),e.prototype.set_place_holder($("nav")),v=new f("logo",$("#logo"),"<p> KRISTKAN </p>",$(".about-author"),h,g),w=new f("contacts",$("#contacts"),"<img src='/images/icons/mail8.png' alt='Contacts'>",$(".contacts"),h,g),x=new e("revial",$("#revial"),"<img src='/images/icons/Krist_Revial_Icon.png' alt='Revial'>"),x.main_function=function(a){var b;a.element_to_revial&&"object"==typeof a?b=a.element_to_revial:"object"==typeof a&&(b=a),this.controller_element.unbind("click").click(function(){"none"===b.css("display")?(b.fadeIn(),$(this).addClass("active")):(b.fadeOut(),$(this).removeClass("active"))})},j.prototype={set_loaded_images:function(a){"object"==typeof a?this.loaded_images=a:console.error("You entered incorrect value: "+a+" . You must enter array")},set_series_element:function(a){"object"==typeof a?this.series_element=a:console.error("You entered incorrect 'series parent element' value: "+a+" . Element must be object")},set_placeholder_element:function(a){"object"==typeof a?this.placeholder=a:console.error("You entered incorrect 'placeholder element' value: "+a+" . Element must be object")},set_image_element_in_series:function(a){"object"==typeof a?this.image_element_in_series=a:console.error("You entered incorrect 'image element in series' value: "+a+" . Element must be object")},compile_elements_in_series:function(){if("object"==typeof this.series_element){var a;for(a=0;a<this.series_element.length;a++){var b=[];b.push($(this.series_element[a]).find(this.image_element_in_series)),this.all_series.push(b);try{}catch(c){console.log(c)}}}},create_modal:function(a){{var b,c,d,e=this,f=a,g=$("<div/>",{"class":e.lightbox_modal_class}),h=$("<div/>",{"class":e.lightbox_modal_all_items}),i=$("<div/>",{"class":e.lightbox_modal_tutorial}),j=$("<div/>",{"class":"inner-"+e.lightbox_modal_tutorial}).appendTo(i);$("<h2/>",{"class":"center-tc",html:"To scroll over pictures <br> <img class='inner-lightbox-modal-tutorial-images' src='/images/mouse43.png' width='80px'><img class='inner-lightbox-modal-tutorial-images' src='/images/touch5.png' width='80px'><br> use your mousewheel, trackpad <br><img class='inner-lightbox-modal-tutorial-images' src='/images/left40.png' width='80px'><img class='inner-lightbox-modal-tutorial-images' src='/images/keyboard17.png' width='80px'><br> or left and right arrows"}).appendTo(j)}for(b=0;b<f.length;b++){var k=function(){return"string"==typeof f[b]?f[b]:"string"==typeof f[b].src?f[b].src:void console.error("Bad loaded_array")}();c=$("<div/>",{"class":e.lightbox_modal_item_class,style:"background-image:url(/images/ajax-loader.gif)"}),d=$("<div/>",{"class":e.lightbox_modal_item_img_class,style:"background-image:url("+k+")"}),e.all_created_images_in_series.push(d),e.all_created_items_in_series.push(c),c.append(d),h.append(c)}g.append(h),g.append(i),this.placeholder.append(g)},set_active_img:function(){for(var a=this.selected_image.attr("src").match(/\w*\.jpg/)[0],b=0;b<this.all_created_items_in_series.length;b++)a===this.all_created_images_in_series[b].css("background-image").match(/\w*\.jpg/)[0]&&(this.all_created_items_in_series[b].addClass("lightbox-active-item"),this.active_item_index=b)},set_first_and_last_items:function(){this.all_created_items_in_series[0].addClass("firstItem"),this.all_created_items_in_series[this.all_created_items_in_series.length-1].addClass("lastItem")},scrollRightOrLeft:function(a,b,c){self=this,c&&(this.scrollTimer=!0,setTimeout(function(){self.scrollTimer=!1},700)),a?this.modal_active_item_position-=b:this.modal_active_item_position+=b,$("."+this.lightbox_modal_all_items).css("transform","translate3d("+this.modal_active_item_position+"px,0,0)"),this.item_selected.removeClass("lightbox-active-item"),this.item_selected=a?this.item_selected.next():this.item_selected.prev(),this.item_selected.addClass("lightbox-active-item")},scroll_and_arrows_controllers:function(){var a=parseInt($("."+this.lightbox_modal_all_items).css("width")),b=parseInt($("."+this.lightbox_modal_item_class).css("margin-right")),c=a+b,d=this;this.scrollTimer=!1,this.item_selected=$(".lightbox-active-item"),this.modal_active_item_position=c*this.active_item_index*-1,$("."+d.lightbox_modal_all_items).css("transform","translate3d("+d.modal_active_item_position+"px,0,0)"),$("."+this.lightbox_modal_class).unbind("mousewheel").on("mousewheel",function(a){var b=a.deltaFactor,e=i(b);a.deltaY>0&&!d.item_selected.hasClass("firstItem")&&!e||a.deltaY>0&&a.deltaX>0&&!d.scrollTimer&&!d.item_selected.hasClass("firstItem")?d.scrollRightOrLeft(!1,c,e):(a.deltaY<0&&!d.item_selected.hasClass("lastItem")&&!e||a.deltaY<0&&a.deltaX<0&&!d.scrollTimer&&!d.item_selected.hasClass("lastItem"))&&d.scrollRightOrLeft(!0,c,e)}),$("body").unbind("keydown").keydown(function(a){37!=a.which||d.item_selected.hasClass("firstItem")?39!=a.which||d.item_selected.hasClass("lastItem")||d.scrollRightOrLeft(!0,c,!1):d.scrollRightOrLeft(!1,c,!1)})},close_button:function(){var a=this,b=$("<div/>",{id:"light-box-close-button","class":"light-box-close-button"}),c=$("<div/>",{id:"light-box-close-button-left-line","class":"light-box-close-button-line"}),d=$("<div/>",{id:"light-box-close-button-right-line","class":"light-box-close-button-line"});b.append(c).append(d),this.placeholder.append(b),b.unbind("click").on("click",function(){a.lightbox_modal_opened=!1,$("."+a.lightbox_modal_class).fadeOut(function(){this.remove(),a.on_close_callback&&a.on_close_callback()}),$("#light-box-close-button").fadeOut(),a.modal_active_item_position=0,a.all_created_items_in_series=[],a.all_created_images_in_series=[]})},init_with_loaded_images:function(a,b,c){$("#light-box-close-button").fadeIn(),this.selected_image=a,this.create_modal(b),this.set_first_and_last_items(),this.set_active_img(),this.scroll_and_arrows_controllers(),this.lightbox_modal_opened=!0,c()},init:function(){var a,b,c=this;for(a=0;a<this.all_series.length;a++)b=this.all_series[a][0],this.all_series[a][0].unbind("click").click({series:b},function(){c.selected_image=$(this),this.series=c.loaded_images||arguments[0].data.series,c.create_modal(this.series),c.set_first_and_last_items(),c.set_active_img(),c.scroll_and_arrows_controllers()})}},y.subscribe("album created",function(){r++,r===D.exemplars.length&&($("#blackscreen, .pace").fadeOut(),s=new j("modal_lightbox",{series_element:$(".row"),image_element_in_series:$("img"),placeholder:$(".main-section"),loading_images:!0,on_close_callback:g}),$(".album-name h2").each(function(a){$(this).delay(1e3*a).fadeIn(1e3)}),setTimeout(function(){$("nav").fadeIn(2e3),$(".album-name").animate({opacity:"0.5"},500,function(){$(this).fadeOut(function(){u=!0,$(".album-name").css({opacity:"1","background-color":"rgba(0,0,0,0.7)"})})})},5e3),J(),x.main_function({element_to_revial:$(".album-name")})),o||(o=$(".row")[0].clientHeight+"px",b(p,".album-name","line-height: "+o,p.cssRules.length))},{},this);var F=0,G=0,H=0,I=0,J=function(){$(".gallery").on("mousemove",function(a){F=a.pageY,G=a.pageX})};setInterval(function(){I>=-1*F?(I+=.08*(F-I),H+=.08*(G-H)):-1*F>=I&&(I-=.08*(F-I),H-=.08*(G-H)),$(".gallery").css("transform","translate3d(0,-"+I*n+"px,0)"),A.x_transform(H),B.x_transform(H),C.x_transform(H),D.x_transform(H),E.x_transform(H)},1e3/60)});